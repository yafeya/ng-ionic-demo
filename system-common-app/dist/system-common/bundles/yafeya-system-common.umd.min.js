!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/Observable"),require("rxjs/add/operator/toPromise"),require("@angular/core"),require("@angular/http"),require("@angular/common")):"function"==typeof define&&define.amd?define("yafeya-system-common",["exports","rxjs/Observable","rxjs/add/operator/toPromise","@angular/core","@angular/http","@angular/common"],e):e(t["yafeya-system-common"]={},t.rxjs.Observable,t.rxjs["add/operator/toPromise"],t.ng.core,t.ng.http,t.ng.common)}(this,function(t,e,r,n,o,i){"use strict";var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function s(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}var a=function(){function t(t,e){this.Name=t,this.Value=e}return Object.defineProperty(t.prototype,"Document",{get:function(){return this.mDocument},set:function(t){this.mDocument=t},enumerable:!0,configurable:!0}),t}(),c=function(n){function t(t,e){void 0===e&&(e=null);var r=n.call(this,t,e)||this;return r.Elements=[],r.Attributes=[],r}return s(t,n),t.prototype.AppendChild=function(t){if(!t)throw new Error("element is null.");return this.Elements.push(t),t.Document=this.Document,t.Parent=this},t.prototype.AppendAttribute=function(t){if(!t)throw new Error("attribute is null.");this.Attributes.push(t),t.Document=this.Document},t.prototype.ToXmlElement=function(e){var r=e.createElement(this.Name);return this.Value&&("base64"==this.Name&&console.log(this.Value),r.appendChild(document.createTextNode(this.Value))),this.Attributes.forEach(function(t){r.setAttribute(t.Name,t.Value)}),this.Elements.forEach(function(t){r.appendChild(t.ToXmlElement(e))}),r},t.prototype.ToXmlString=function(e){return e.Append("<"+this.Name+">"),this.Value?e.Append(this.Value):this.Elements.forEach(function(t){t.ToXmlString(e)}),e.Append("</"+this.Name+">"),e.Build()},t}(a),l=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.Empty,t&&t instanceof e?this.value=t.Value:t&&"[object String]"===Object.prototype.toString.call(t)&&e.IsGuid(t)&&(this.value=t)}return Object.defineProperty(e.prototype,"Value",{get:function(){return this.value},enumerable:!0,configurable:!0}),e.prototype.IsEmpty=function(){return this.value===e.Empty},e.prototype.ToString=function(){return this.value},e.prototype.ToJson=function(){return this.value},e.Generate=function(t){for(var e="",r=0;r<t;r++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},e.New=function(){return new e([e.Generate(2),e.Generate(1),e.Generate(1),e.Generate(1),e.Generate(3)].join("-"))},e.IsGuid=function(t){return t&&(t instanceof e||e.Validator.test(t.toString()))},e.Empty="00000000-0000-0000-0000-000000000000",e.Validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e}(),p=function(){function t(){this.content=[],this.latest=null}return Object.defineProperty(t.prototype,"IsEmpty",{get:function(){return 0===this.content.length},enumerable:!0,configurable:!0}),t.prototype.Append=function(t){return this.AppendSingle(t),this},t.prototype.AppendLine=function(t){return this.AppendSingle(t),this.content.push("\r\n"),this},t.prototype.AppendLines=function(t){var e=this;return t.forEach(function(t){null!=t&&e.AppendLine(t)}),this},t.prototype.Build=function(){return null!=this.latest||(this.latest=this.Join("")),this.latest},t.prototype.Join=function(t){return this.content.join(t)},t.prototype.toString=function(){return this.Build()},t.prototype.Dispose=function(){this.latest=null,this.content=[]},t.prototype.AppendSingle=function(t){null!=t&&(this.latest=null,"string"!=typeof t?this.content.push(t.toString()):this.content.push(t))},t}(),f=function(){function t(){}return t.prototype.ToJson=function(t){return Xml2Js.Parser().toJson(t)},t}(),y=function(){function t(){}return t.prototype.ContainsImage=function(){return clipboard.availableFormats().some(function(t){return"image/png"===t||"image/jpeg"===t||"image/jpg"===t||"image/gif"===t})},t.prototype.GetImage=function(){clipboard.availableFormats();return clipboard.readImage()},t.prototype.GetAvailableFormats=function(){return clipboard.availableFormats()},t.prototype.GetImageUrl=function(){var t="",e=this.GetImage();return e&&(t=e.toDataURL()),t},t.prototype.GetPngImage=function(){var t,e=this.GetImage();return e&&(t=e.toPNG()),t},t.prototype.GetPngBase64Image=function(){var t="",e=this.GetImage();e&&(t=e.toPNG().toString("base64"));return t},t.prototype.Clear=function(){clipboard.clear()},t.prototype.SetText=function(t){try{null!==clipboard&&clipboard.writeText(t)}catch(n){console.log(n)}if(document)try{var e=document.createElement("textarea");document.body.appendChild(e),e.textContent=t;var r=document.activeElement;e.focus(),e.setSelectionRange(0,e.value.length),document.execCommand("copy"),r&&r.focus(),document.body.removeChild(e)}catch(n){console.log(n)}},t.prototype.GetText=function(){return clipboard.readText()},t.prototype.GetHtml=function(){return clipboard.readHTML()},t.prototype.SetHtml=function(t){return clipboard.writerHTML(t)},t.prototype.GetRTF=function(){return clipboard.readRTF()},t.prototype.SetRTF=function(t){clipboard.writerRTF(t)},t}(),d=function(){function t(){}return t.prototype.Decode=function(t){var e=t.split(".");if(3!==e.length)throw new Error("JWT must have 3 parts");var r=this.urlBase64Decode(e[1]);if(!r)throw new Error("Cannot decode the token");return JSON.parse(r)},t.prototype.urlBase64Decode=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}return decodeURIComponent(encodeURI(window.atob(e)))},t}(),m=function(){function t(t){this.enumerable=t,this.pointer=0}return t.prototype.next=function(t){return this.pointer<this.enumerable.Count?{done:!1,value:this.enumerable.Items[this.pointer++]}:{done:!0,value:null}},t}(),g=function(){function r(){this.items=[]}return Object.defineProperty(r.prototype,"Count",{get:function(){return this.Items.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"Items",{get:function(){return this.items},set:function(t){this.items=t},enumerable:!0,configurable:!0}),r.prototype[Symbol.iterator]=function(){return new m(this)},r.From=function(t){var e=new r;return t&&(e.Items=t),e},r}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),Object.defineProperty(e.prototype,"IsReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.Add=function(t){if(!t)throw new Error("Argument 'item' is null.");this.Items.push(t)},e.prototype.AddRange=function(t){var e,r;if(!t)throw new Error("Argument 'items' is null.");try{for(var n=h(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.Add(i)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}},e.prototype.Clear=function(){this.Items=[]},e.prototype.Contains=function(t){if(!t)throw new Error("Argument 'item' is null.");return-1<this.Items.indexOf(t)},e.prototype.Remove=function(t){if(!t)throw new Error("Argument 'item' is null.");var e=this.Items.indexOf(t);return-1<e&&(this.Items.splice(e,1),!0)},e.prototype.CopyTo=function(t,e){var r,n;if(!t)throw new Error("Argument 'array' is null.");if(e<0||e>t.length)throw new Error("Argument 'arrayIndex' is out of range.");var o=e;try{for(var i=h(this.Items),u=i.next();!u.done;u=i.next()){var s=u.value;t.splice(o++,0,s)}}catch(a){r={error:a}}finally{try{u&&!u.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}},e}(g),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.IndexOf=function(t){if(!t)throw new Error("Argument 'item' is null.");return this.Items.indexOf(t)},e.prototype.Insert=function(t,e){if(!e)throw new Error("Argument 'item' is null.");if(t<0||t>=this.Items.length)throw new Error("Argument 'index' is out of index");this.Items.splice(t,0,e)},e.prototype.RemoveAt=function(t){if(t<0||t>=this.Items.length)throw new Error("Argument 'index' is out of index");this.Items.splice(t,1)},e}(v),w=function(n){function t(t,e){var r=n.call(this)||this;return r.key=t,r.Items=e.Items,r}return s(t,n),Object.defineProperty(t.prototype,"Key",{get:function(){return this.key},set:function(t){this.key=t},enumerable:!0,configurable:!0}),t}(g),I=function(){function t(){this.items={},this.count=0}return t.prototype.ContainsKey=function(t){return this.items.hasOwnProperty(t)},t.prototype.Count=function(){return this.count},t.prototype.Add=function(t,e){this.items[t]=e,this.count++},t.prototype.Remove=function(t){var e=this.items[t];return delete this.items[t],this.count--,e},t.prototype.Item=function(t){return this.items[t]},t.prototype.Keys=function(){var t=[];for(var e in this.items)this.items.hasOwnProperty(e)&&t.push(e);return t},t.prototype.Values=function(){var t=[];for(var e in this.items)this.items.hasOwnProperty(e)&&t.push(this.items[e]);return t},t}(),A=function(){function t(t,e){this.key=t,this.value=e}return Object.defineProperty(t.prototype,"Key",{get:function(){return this.key},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this.value},enumerable:!0,configurable:!0}),t}(),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map=new Map,t}return s(t,e),t.prototype.Add=function(t,e){this.map.set(t,e),this.Items.Add(new A(t,e))},t.prototype.ContainsKey=function(t){return this.map.has(t)},t.prototype.Item=function(t){return this.map.get(t)},t.prototype.Keys=function(){var r=[];return this.map.forEach(function(t,e){r.push(e)}),r},t.prototype.Remove=function(e){var t=this.Items.FirstOrDefault(function(t){return t.Key===e});return t&&this.Items.Remove(t),this.map["delete"](e)},t.prototype.Values=function(){var r=[];return this.map.forEach(function(t,e){r.push(t)}),r},t}(g),S=function(n){function i(t,e){var r=n.call(this)||this;return r.array=t,(r.scheduler=e)||1!==t.length?(r._isScalar=!0,r.values=t):(r._isScalar=!0,r.values=t[0]),r}return s(i,n),i.Create=function(t){return new i([t])},i.dispatch=function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;n<=r?o.complete():(o.next(e[r]),o.closed||(t.index=r+1,this.schedule(t)))},Object.defineProperty(i.prototype,"Count",{get:function(){return this.values.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Values",{get:function(){return this.values},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Items",{get:function(){return this.values},set:function(t){this.values=t},enumerable:!0,configurable:!0}),i.prototype.Add=function(t){this.values&&this.values.push(t)},i.prototype.AddRange=function(t){var e,r;if(t)try{for(var n=h(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.Add(i)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}},i.prototype.Remove=function(t){var e=this.values.indexOf(t);if(!(-1<e))return!1;this.values.splice(e,1)},i.prototype[Symbol.iterator]=function(){return new m(this)},i.prototype._subscribe=function(t){var e=this.array,r=e.length,n=this.scheduler;if(n)return n.schedule(i.dispatch,0,{array:e,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(e[0]);t.complete()},i}(e.Observable);function C(t){var e,r;if(!t)throw new Error("Argument 'item' is null.");try{for(var n=h(this.Items),o=n.next();!o.done;o=n.next()){t(o.value)}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}}function x(t){if(!t)throw new Error("Argument 'comparer' is null.");this.Items=this.Items.sort(t)}function F(t){var e,r;if(!t)throw new Error("Argument 'predicate' is null.");var n=new b;try{for(var o=h(this.Items),i=o.next();!i.done;i=o.next()){var u=i.value;t(u)&&n.Add(u)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(e)throw e.error}}return g.From(n.Items)}function O(t){return this.Items.FirstOrDefault(t)}function D(){return!(this.Items&&0<this.Items.length)}function P(t){var e,r;if(t){try{for(var n=h(this.Items),o=n.next();!o.done;o=n.next()){if(t(o.value))return!0}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}return!1}return 0!==this.Items.length}function j(t){return this.Select(t).Items.reduce(function(t,e){return Math.max(t,e)})}function T(t){return this.Select(t).Items.reduce(function(t,e){return Math.min(t,e)})}function L(r){var t=this.Items.sort(function(t,e){return r(t)-r(e)});return g.From(t)}function R(r){var t=this.Items.sort(function(t,e){return r(e)-r(t)});return g.From(t)}function N(e){var t=this.Items.filter(function(t){return e(t)});return g.From(t)}function G(t){var e,r,n=[];try{for(var o=h(this.Items),i=o.next();!i.done;i=o.next()){var u=i.value;n.push(t(u))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(e)throw e.error}}return g.From(n)}function k(t){return this.Items[t]}function H(i,u){if(!this)throw new Error("Parameter is null");if(!i)throw new Error("Parameter 'keySelelctor'is null");u||(u=function(t){return t});var s=new E;this.ForEach(function(t){var e,r=i(t),n=u?u(t):t;if(s.ContainsKey(r)){var o=s.Item(r);e=o||new b}else e=new b,s.Add(r,e);e.Add(n)});var e=new b;return s.ForEach(function(t){e.Add(new w(t.Key,t.Value))}),e}g.prototype.ForEach=C,g.prototype.Sort=x,g.prototype.FindAll=F,g.prototype.FirstOrDefault=O,g.prototype.IsEmpty=D,g.prototype.Any=P,g.prototype.Max=j,g.prototype.Min=T,g.prototype.OrderBy=L,g.prototype.OrderByDescending=R,g.prototype.Where=N,g.prototype.Select=G,g.prototype.ElementAt=k,g.prototype.GroupBy=H,S.prototype.ForEach=C,S.prototype.Sort=x,S.prototype.FindAll=F,S.prototype.FirstOrDefault=O,S.prototype.IsEmpty=D,S.prototype.Any=P,S.prototype.Max=j,S.prototype.Min=T,S.prototype.OrderBy=L,S.prototype.OrderByDescending=R,S.prototype.Where=N,S.prototype.Select=G,S.prototype.ElementAt=k,S.prototype.GroupBy=H;var M=new n.InjectionToken("./IWindowSizeWatcher"),V=function(){function t(){this.handlers=new E}return t.prototype.Start=function(){var u=this;window.onresize=function(t){var e,r;try{for(var n=h(u.handlers.Values()),o=n.next();!o.done;o=n.next()){o.value.Handle({Width:window.innerWidth,Height:window.innerHeight})}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}}},t.prototype.Add=function(t,e){this.handlers.Add(t,e)},t.prototype.Remove=function(t){this.handlers.Remove(t)},t.prototype.OnSizeChanged=function(t){var e,r;try{for(var n=h(this.handlers.Values()),o=n.next();!o.done;o=n.next()){o.value.Handle({Width:window.innerWidth,Height:window.innerHeight})}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}},t}(),W=function(){function t(){}return Object.defineProperty(t.prototype,"Root",{get:function(){return this.mRoot},set:function(t){this.mRoot=t,this.mRoot.Document=this},enumerable:!0,configurable:!0}),t.prototype.Build=function(){var t=document.implementation.createDocument("","",null);return t.appendChild(this.Root.ToXmlElement(t)),t},t.prototype.BuildXmlString=function(){var t=new p;return this.Root.ToXmlString(t)},t}(),J=function(r){function t(t,e){return r.call(this,t,e)||this}return s(t,r),t}(a),z=function(){function r(t,e){this.canExecute=t,this.action=e}return r.prototype.CanExecute=function(t){return null===this.canExecute||this.canExecute(t)},r.prototype.Execute=function(t){if(this.action)try{this.action(t)}catch(e){throw e}},r.From=function(t,e){return e||(e=function(t){return!0}),new r(e,t)},r}(),B=function(){function t(){this.Commands=new E}return t.prototype.GetCommand=function(t){return this.Commands.Item(t)},t.prototype.Register=function(t,e){if(!t)throw new Error("Name value is null.");if(!e)throw new Error("Command value is null.");return this.Commands.Add(t,e),this},t.decorators=[{type:n.Injectable}],t}(),U=new n.InjectionToken("./message-mediator/IMessageMediator"),_=new n.InjectionToken("./logging/ILoggerFactory"),K=new n.InjectionToken("./exception/IExceptionHandler"),X=new n.InjectionToken("./command/ICommandRepository"),q=new n.InjectionToken("./command/ICommandDescriptorRepository"),$=new n.InjectionToken("./action/IActionRepository"),Z=function(){function t(t,e){this.commandRepository=t,this.logger=e.CreateLogger("InvokeCommand")}return t.prototype.OnClicked=function(){if(this.logger.Debug("Invoke command: "+this.CommandName+" with "+JSON.stringify(this.CommandParam)),String.IsValid(this.CommandName)){var t=this.commandRepository.GetCommand(this.CommandName);null!=t&&t.CanExecute(this.CommandParam)&&(this.logger.Debug("Get command with name: "+this.CommandName+", "+JSON.stringify(t)),t.Execute(this.CommandParam))}},t.decorators=[{type:n.Directive,args:[{selector:"[InvokeCommand]"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[X]}]},{type:undefined,decorators:[{type:n.Inject,args:[_]}]}]},t.propDecorators={CommandName:[{type:n.Input,args:["InvokeCommand"]}],CommandParam:[{type:n.Input}],OnClicked:[{type:n.HostListener,args:["click",["$event"]]}]},t}(),Q=function Nt(t,e,r,n,o,i,u,s,a){this.Header=t,this.CommandName=e,this.Group=r,this.Icon=n,this.Image=o,this.Description=i,this.Id=u,this.Tag=s,this.Shortcut=a},Y=function(){function t(){this.descriptors=new b}return Object.defineProperty(t.prototype,"Descriptors",{get:function(){return this.descriptors},enumerable:!0,configurable:!0}),t.prototype.Register=function(t){return null!=t&&this.descriptors.Add(t),this},t.prototype.Remove=function(t){return null!==t&&this.descriptors.Remove(t),this},t.prototype.RemoveRange=function(t){var e=this;null!==t&&this.Descriptors.FindAll(t).ForEach(function(t){e.descriptors.Remove(t)})},t.decorators=[{type:n.Injectable}],t}(),tt=function(){function t(){}return t.GetDescriptorsByGroup=function(e){return this.Descriptors.Where(function(t){return t.Group===e})},t}();Y.prototype.GetDescriptorsByGroup=tt.GetDescriptorsByGroup;var et=function(){function t(){}return Object.defineProperty(t.prototype,"ToString",{get:function(){return"AppSettingItem Name:'"+this.Name+"', Id:'"+this.Id+"', Value:'"+this.Value+"'"},enumerable:!0,configurable:!0}),t}(),rt=function(){function t(){this.Items=new I}return Object.defineProperty(t.prototype,"SettingItems",{get:function(){return this.Items.Values()},enumerable:!0,configurable:!0}),t.prototype.GetItem=function(t,e){if(!t)throw new Error("Given name is null.");var r=this.Items.Item(t);return r||null==e||((r=new et).Name=t,r.Value=e,this.Items.Add(t,r)),r},t.prototype.AddItem=function(t){if(t&&t.Name){var e=this.GetItem(t.Name);e?e.Value=t.Value:this.Items.Add(t.Name,t)}return this},t.prototype.SetValue=function(t,e){var r=this.GetItem(t);return r||((r=new et).Name=t,this.Items.Add(t,r)),r.Value=e,this},t}(),nt=new n.InjectionToken("./IOptionRepository"),ot=function(){function t(){this.descriptors=new E}return t.prototype.Register=function(t){if(!t)throw new Error("Argument descriptor is null");return this.descriptors.ContainsKey(t.Id)||this.descriptors.Add(t.Id,t),this},t.prototype.Find=function(e){return g.From(this.descriptors.Values().Where(function(t){return e(t)}))},t.prototype.FindOne=function(t){return this.descriptors.ContainsKey(t)?this.descriptors.Item(t):null},t.decorators=[{type:n.Injectable}],t}(),it=function(){function t(){this.mInnerDictionary=new I}return t.prototype.Add=function(t,e){return t&&this.mInnerDictionary.Add(t,e),this},t.prototype.Get=function(t){return t?this.mInnerDictionary.Item(t):""},t}(),ut=function(){function t(){this.DefaultLocal="en-US",this.mInnerDictionary=new I}return t.prototype.GetResources=function(t){return this.mInnerDictionary.Item(t)},t.prototype.AddResources=function(t,e){return t&&this.mInnerDictionary.Add(t,e),this},t.prototype.GetString=function(t,e){var r=e||this.DefaultLocal,n=this.GetResources(r);return n?n.Get(t):""},t}(),st={Trace:1,Debug:2,Information:3,Warning:4,Error:5,Critical:6,None:9999};st[st.Trace]="Trace",st[st.Debug]="Debug",st[st.Information]="Information",st[st.Warning]="Warning",st[st.Error]="Error",st[st.Critical]="Critical",st[st.None]="None";var at=function(){function t(t,e){var r=this;this.loggerFactory=t,this.name=e,this.loggers=new b,this.formatter=this.MessageFormatter;var n=t.GetProviders();0<n.Count&&n.ForEach(function(t){r.loggers.Add(t.CreateLogger(e))})}return t.prototype.Log=function(e,r,n,o,i){var u=new b;if(this.loggers.ForEach(function(t){try{t.Log(e,r,n,o,i)}catch(o){u.Add(o)}}),0<u.Count)throw new Error},t.prototype.IsEnabled=function(t){var e,r;try{for(var n=h(this.loggers.Items),o=n.next();!o.done;o=n.next()){if(o.value.IsEnabled(t))return!0}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}return!1},t.prototype.Debug=function(t){return this.Log(st.Debug,0,t,null,this.formatter),this},t.prototype.Trace=function(t){return this.Log(st.Trace,0,t,null,this.formatter),this},t.prototype.Info=function(t){return this.Log(st.Information,0,t,null,this.formatter),this},t.prototype.Warn=function(t){return this.Log(st.Warning,0,t,null,this.formatter),this},t.prototype.Error=function(t){return this.Log(st.Error,0,t,null,this.formatter),this},t.prototype.Fatal=function(t){return this.Log(st.Critical,0,t,null,this.formatter),this},t.prototype.AddProvider=function(t){var e=t.CreateLogger(this.name);this.loggers.Add(e)},t.prototype.MessageFormatter=function(t,e){return t||e?t?e?t+"\n"+e:t.toString():e.message:""},t}(),ct=function(){function t(){this.providers=new b,this.loggers=new E}return t.prototype.CreateLogger=function(t){var e=this.loggers.Item(t);return e||(e=new at(this,t),this.loggers.Add(t,e)),e},t.prototype.AddProvider=function(t){var e,r;this.providers.Add(t);try{for(var n=h(this.loggers.Items),o=n.next();!o.done;o=n.next()){o.value.Value.AddProvider(t)}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.GetProviders=function(){return this.providers},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),lt=function(){function t(){this.formatter=this.MessageFormatter}return Object.defineProperty(t.prototype,"Name",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!0,configurable:!0}),t.prototype.IsEnabled=function(t){return!0},t.prototype.Debug=function(t){return this.Log(st.Debug,0,t,null,this.formatter),this},t.prototype.Trace=function(t){return this.Log(st.Trace,0,t,null,this.formatter),this},t.prototype.Info=function(t){return this.Log(st.Information,0,t,null,this.formatter),this},t.prototype.Warn=function(t){return this.Log(st.Warning,0,t,null,this.formatter),this},t.prototype.Error=function(t){return this.Log(st.Error,0,t,null,this.formatter),this},t.prototype.Fatal=function(t){return this.Log(st.Critical,0,t,null,this.formatter),this},t.prototype.MessageFormatter=function(t,e){return t||e?t?e?t+"\n"+e:JSON.stringify(t):e.message:""},t}(),pt=function(n){function t(t,e){var r=n.call(this)||this;return r.filter=e,r.Name=t,r}return s(t,n),t.prototype.Log=function(t,e,r,n,o){console.log("["+(new Date).toLocaleTimeString()+"] "+this.Name+": "+t+", "+this.formatter(r,n))},t}(lt),ft=function(){function t(t){null==(this.filter=t)&&(t=function(t,e){return!0})}return t.prototype.CreateLogger=function(t){return new pt(t,this.filter)},t.prototype.Dispose=function(){},t}(),ht=function(n){function t(t,e){var r=n.call(this)||this;return r.log4JsLogger=e,r.Name=t,r}return s(t,n),t.prototype.Log=function(t,e,r,n,o){var i=this.formatter(r,n);switch(t){case st.Debug:this.log4JsLogger.debug(i);break;case st.Trace:this.log4JsLogger.trace(i);break;case st.Information:this.log4JsLogger.info(i);break;case st.Warning:this.log4JsLogger.warn(i);break;case st.Error:this.log4JsLogger.error(i);break;case st.Critical:this.log4JsLogger.fatal(i);break;default:this.log4JsLogger.debug(i)}},t.prototype.IsEnabled=function(t){var e;switch(t){case st.Debug:e={level:5e3,levelStr:"TRACE"};break;case st.Trace:e={level:1e4,levelStr:"DEBUG"};break;case st.Information:e={level:2e4,levelStr:"INFO"};break;case st.Warning:e={level:3e4,levelStr:"WARN"};break;case st.Error:e={level:4e4,levelStr:"ERROR"};break;case st.Critical:e={level:5e4,levelStr:"FATAL"};break;default:e={level:1e4,levelStr:"DEBUG"}}return this.log4JsLogger.isLevelEnabled(e)},t}(lt),yt=function(){function t(){}return t.Exists=function(t){var e;try{e=fs.existsSync(t)}catch(r){console.log(r),e=!1}return e},t.Create=function(t,e){try{fs.writeFileSync(t,e)}catch(r){console.log(r)}},t.Delete=function(t){try{fs.unlinkSync(t)}catch(e){console.log(e)}},t.ReadAllText=function(t,e){var r;try{r=fs.readFileSync(t,e)}catch(n){console.log(n),r=undefined}return r},t.Copy=function(t,e,r){try{var n=!1,o=fs.createReadStream(t);this.Exists(e)?r&&(fs.unlinkSync(e),n=!0):n=!0,n&&o.pipe(fs.createWriteStream(e))}catch(i){console.log(i)}},t.FindFolder=function(t){var e=undefined;return t&&this.Exists(t)&&(e=t.substr(0,t.lastIndexOf("/")),String.IsNullOrEmpty(e)&&(e=t.substr(0,t.lastIndexOf("\\")))),e},t}(),dt=function(){function t(){}return Object.defineProperty(t.prototype,"App",{get:function(){return electron.remote.app},enumerable:!0,configurable:!0}),t.prototype.GetUserDataFolder=function(){return this.App.getPath("userData")},t.prototype.GetAppDataFolder=function(){return this.App.getPath("appData")},t.prototype.GetMyDocumentFolder=function(){return this.App.getPath("documents")},t.prototype.GetPictureFolder=function(){return this.App.getPath("pictures")},t.prototype.GetCurrentFolder=function(){return this.App.getPath("exe")},t.prototype.GetTempFolder=function(){return this.App.getPath("temp")},t.prototype.GetAppName=function(){return this.App.getName()},t.prototype.ShowItemInFolder=function(t){electron.remote.shell.showItemInFolder(t)},t.prototype.Exist=function(t){try{return fs.accessSync(t,fs.F_OK),!0}catch(e){return!1}},t.prototype.EnsureFolderExist=function(t){if(!this.Exist(t))try{fs.mkdirSync(t)}catch(e){console.log(e)}},t.prototype.Combine=function(t,e){return path.join(t,e)},t}(),mt=function(){function t(t,e){if(void 0===e&&(e="log.txt"),t)t();else try{var r=new dt,n=r.GetUserDataFolder();r.EnsureFolderExist(n);var o=r.Combine(n,e);log4js.configure({appenders:{file:{type:"file",filename:o,maxLogSize:20480,backups:2},console:{type:"console"}},categories:{"default":{appenders:["console","file"],level:"debug"}}})}catch(i){console.log("Not Electron runtime, initialize Log4JS failed.")}}return t.prototype.CreateLogger=function(t){var e=t||"Default",r=log4js.getLogger(e);return new ht(e,r)},t.prototype.Dispose=function(){},t}(),gt=function(){function t(){}return t.AddDebug=function(){var t=new ft;return this.AddProvider(t),this},t.AddLog4Js=function(t,e){void 0===e&&(e="log.txt");var r=new mt(t,e);return this.AddProvider(r),this},t}();ct.prototype.AddLogJs=gt.AddLog4Js,ct.prototype.AddDebug=gt.AddDebug;var vt=function(){function t(t){this.loggerFactory=t,this.logger=t.CreateLogger("ExceptionHandler")}return t.prototype.Handle=function(t){this.logger.Error(t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:[_]}]}]},t}(),bt=function(){function t(t,e,r){this.http=t,this.exceptionHandler=e,this.OutputDebugging=!0,this.logger=r.CreateLogger("HttpClient"),this.headers=new o.Headers,this.headers.append("Content-Type","application/json")}return Object.defineProperty(t.prototype,"ErrorHander",{get:function(){return this.errorHandler},set:function(t){this.errorHandler=t},enumerable:!0,configurable:!0}),t.prototype.Post=function(n,o){var i=this;return new Promise(function(e,r){var t=JSON.stringify(o);i.OutputDebugging&&i.logger.Debug("Post data url: "+n).Debug(t),i.http.post(n,t,{headers:i.headers}).toPromise().then(function(t){e(t.json())})["catch"](function(t){i.exceptionHandler.Handle(t),i.errorHandler&&i.errorHandler(t),r(t)})})},t.prototype.PostRaw=function(t,n){var o=this;return new Promise(function(e,r){o.OutputDebugging&&o.logger.Debug("Post data url: "+t).Debug(n),o.http.post(t,n,{headers:o.headers}).toPromise().then(function(t){e(t.json())})["catch"](function(t){o.exceptionHandler.Handle(t),o.errorHandler&&o.errorHandler(t),r(t)})})},t.prototype.Delete=function(t){var n=this;return new Promise(function(e,r){n.http["delete"](t).toPromise().then(function(t){e(t.json())})["catch"](function(t){n.exceptionHandler.Handle(t),n.errorHandler&&n.errorHandler(t),r(t)})})},t.prototype.Get=function(t,n){void 0===n&&(n=!1);var o=this;return new Promise(function(e,r){o.OutputDebugging&&o.logger.Debug("Get data url: "+t),o.http.get(t,{headers:o.headers}).toPromise().then(function(t){e(n?t:t.json())})["catch"](function(t){o.exceptionHandler.Handle(t),o.errorHandler&&o.errorHandler(t),r(t)})})},t.prototype.UseToken=function(t){var e=this.CreateDefaultHeader();return t&&e.append("Authorization","bearer "+t),this.headers=e,this},t.prototype.UseHeader=function(t){if(void 0===t&&(t=this.CreateDefaultHeader()),!t)throw new Error("Given http header is null.");return this.headers=t,this},t.prototype.CreateDefaultHeader=function(){var t=new o.Headers;return t.append("Content-Type","application/json"),t},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:o.Http},{type:vt},{type:ct}]},t}(),wt=function(){function t(){this.algorithm="aes-256-ctr",this.password="a3b8d9w34"}return Object.defineProperty(t.prototype,"Electron",{get:function(){return electron},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"App",{get:function(){return electron.remote.app},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MainMenu",{get:function(){return electron.remote.Menu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IpcClient",{get:function(){return electron.ipcRenderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Remote",{get:function(){return electron.remote},enumerable:!0,configurable:!0}),t.prototype.GetUserDataFolder=function(){return this.App.getPath("userData")},t.prototype.GetAppDataFolder=function(){return this.App.getPath("appData")},t.prototype.GetMyDocumentFolder=function(){return this.App.getPath("documents")},t.prototype.GetPictureFolder=function(){return this.App.getPath("pictures")},t.prototype.GetAppName=function(){return this.App.getName()},t.prototype.OpenFileDialog=function(t){return void 0===t&&(t=null),electron.remote.dialog.showOpenDialog({properties:["openFile"],filters:t}).toString()},t.prototype.OpenFilesDialog=function(t){return void 0===t&&(t=null),electron.remote.dialog.showOpenDialog({properties:["openFile","multiSelections"],filters:t})},t.prototype.TextFileFilter=function(){return[{name:"Text Documents",extensions:["txt","cs","ts","js","scss","css","html","htm"]}]},t.prototype.ImageFileFilter=function(){return[{name:"Images",extensions:["jpg","png","gif","bmp"]}]},t.prototype.OpenImageDialog=function(){return this.OpenFileDialog(this.ImageFileFilter())},t.prototype.OpenImagesDialog=function(){return this.OpenFilesDialog(this.ImageFileFilter())},t.prototype.SetApplicationMenu=function(t){electron.remote.Menu.setApplicationMenu(t)},t.prototype.OpenExternal=function(t){electron.remote.shell.openExternal(t)},t.prototype.ShowItemInFolder=function(t){electron.remote.shell.showItemInFolder(t)},t.prototype.ReadFileAsync=function(t){var e=this;return new Promise(function(n,o){e.Exist(t)||o(new Error("File doesn't exist.")),fs.readFile(t,"binary",function(t,e){t&&o(t);var r=EncodingHelper.decode(e,"utf8");n(r)})})},t.prototype.ReadFileLineByLine=function(o){return new Promise(function(t,e){var r=[],n=fs.createReadStream(o).pipe(EventStream.split()).pipe(EventStream.mapSync(function(t){n.pause(),r.push(t),n.resume()}).on("error",function(){e("Read file error.")}).on("end",function(){t(r.join(""))}))})},t.prototype.ReadFileAsBase64Async=function(t){var n=this,o=this.NormalizePath(t.toString());return console.log("Full path: "+o),new Promise(function(t,e){n.Exist(o)||e(new Error("File doesn't exist.' + fullPath")),console.log("File to open "+o);var r=fs.readFileSync(o,"base64");t(new Buffer(r,"base64").toString("base64"))})},t.prototype.ReadFileAsBase64=function(t){var e=this.NormalizePath(t.toString());if(!this.Exist(e))throw Error("File doesn't exist."+e);var r=fs.readFileSync(e,"base64");return new Buffer(r,"base64").toString("base64")},t.prototype.ReadFileStream=function(t){return fs.createReadStream(t)},t.prototype.WriteFileAsync=function(t,n){return console.log("Write data to file."),new Promise(function(e,r){fs.writeFile(t,n,function(t){t&&r(t),e(!0)})})},t.prototype.GetMimeType=function(t){try{return Mime.lookup(t)}catch(e){console.log("Get MIME error: "+e)}},t.prototype.GetFilename=function(t){try{return Path.basename(t)}catch(e){console.log("Get file name error: "+e)}},t.prototype.GetFilenameWithoutExtension=function(t){var e=this.GetFilename(t);return Path.parse(e).name},t.prototype.GetFileSize=function(t){return fs.statSync(t).size},t.prototype.GetFileSizeString=function(t){try{var e=this.GetFileSize(t);return FileSize(e)}catch(r){console.log("Get file name error: "+r)}},t.prototype.ConverToFileSizeString=function(t){return FileSize(t)},t.prototype.Encrypt=function(t){if(!t)return"";var e=Crypts.createCipher(this.algorithm,this.password),r=e.update(t,"utf8","hex");return r+=e["final"]("hex")},t.prototype.Decrypt=function(t){if(!t)return"";var e=Crypts.createDecipher(this.algorithm,this.password),r=e.update(t,"hex","utf8");return r+=e["final"]("utf8")},t.prototype.Exist=function(t){try{return fs.accessSync(t,fs.F_OK),!0}catch(e){return!1}},t.prototype.EnsureFolderExist=function(t){if(!this.Exist(t))try{fs.mkdirSync(t)}catch(e){console.log(e)}},t.prototype.CombinePath=function(t,e){var r;try{r=NjPath.join(t,e)}catch(n){console.log(n)}return r},t.prototype.NormalizePath=function(t){return NjPath.normalize(t)},t.prototype.CreateGuidString=function(){return l.New().Value},t.prototype.CreateGuid=function(){return l.New()},t.decorators=[{type:n.Injectable}],t}(),It=function(){function t(t){this.injector=t}return t.prototype.GetService=function(t){return this.injector.get(t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(),At=function(){function e(){}return e.SetLocatorProvider=function(t){e.currentProvider=t()},e.GetService=function(t){return e.currentProvider.get(t)},e.currentProvider=undefined,e.decorators=[{type:n.Injectable}],e}();String.prototype.ToLower=function(){return this.toLowerCase()},String.prototype.ToUpper=function(){return this.toUpperCase()},String.prototype.Trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.Normalize=function(){return this.replace(/^\s*|\s(?=\s)|\s*$/g,"")},String.prototype.StartsWith=function(t){return this.slice(0,t.length)===t},String.prototype.EndsWith=function(t){return this.slice(t.length)===t},String.prototype.CapFirst=function(){if(1===this.length)return this.toUpperCase();if(0<this.length){return/^(\(|\[|'|')/.test(this)?this.substring(0,2).toUpperCase()+this.substring(2):this.substring(0,1).toUpperCase()+this.substring(1)}return null},String.prototype.CapWords=function(){var t=this.split(/\s/);if(1===t.length)return t[0].capFirst();if(1<t.length){for(var e="",r=0;r<t.length;r++)null!==t[r].capFirst()&&(e+=t[r].capFirst()+" ");return e.trim(),e}return null},String.prototype.TruncateWords=function(t){var e=this.split(/\s+/);return e.length>t?e.slice(0,t).join(" "):e.join(" ")},String.prototype.StripHtml=function(){var t=this.replace(/<[\/]?([^> ]+)[^>]*>/g,"");return t=(t=(t=(t=(t=t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"")).replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"")).replace(/<!--[\s\S]*?-->/g,"")).replace("&nbsp;"," ")).replace("&amp;","&")},String.prototype.EscapeHtml=function(){var t=this.replace(/'/g,"&quot;");return t.replace(/&(?!\w+;)/g,"&amp;"),t.replace(/>/g,"&gt;"),t.replace(/</g,"&lt;"),t},String.prototype.Contains=function(t){return-1!==this.indexOf(t)},String.prototype.Slugify=function(t){return void 0===t&&(t=!0),t?this.normalize().replace(/[^a-z0-9]/gi,"-"):this.lower().normalize().replace(/[^a-z0-9]/gi,"-")},String.prototype.HtmlToText=function(){return this.replace(/<[^>]*>?/g,"")},String.prototype.CountWord=function(){if(!this)return 0;var n="",o="";this.replace(/([\w\s]*)([^\w;,.''{}\[\]+_)(*&\^%$#@!~\/?]*)/g,function(t,e,r){return n+=e,o+=r,t});var t=n.trim().split(" ").length;return o&&(t+=o.replace(" ","").split("").length),t},String.prototype.ValidateEmail=function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this)},String.prototype.IndexOf=function(t){return this.indexOf(t)},String.prototype.LastIndexOf=function(t){return this.lastIndexOf(t)},String.prototype.SubString=function(t,e){return this.substring(t,e)},String.IsNullOrEmpty=function(t){if(t===undefined||null===t)return!0;var e=t.toString();return""===e||!(!e||""!==e.trim())},String.IsValid=function(t){return!String.IsNullOrEmpty(t)},String.Empty=function(){return""};var Et=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};function St(t){return t&&"object"==typeof t&&!Array.isArray(t)}Array.prototype.Add=function(t){this.push(t)},Array.prototype.Empty=function(){return this.splice(0,this.length)},Array.prototype.IsEmpty=function(){return 0===this.length},Array.prototype.ElementAt=function(t){return this[t]},Array.prototype.FirstOrDefault=function(t){var e,r,n=null;if(t)try{for(var o=Et(this),i=o.next();!i.done;i=o.next()){var u=i.value;if(t(u)){n=u;break}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(e)throw e.error}}else n=this[0];return n},Array.prototype.Max=function(){return this.reduce(function(t,e){return Math.max(t,e)})},Array.prototype.Min=function(){return this.reduce(function(t,e){return Math.min(t,e)})},Array.prototype.Count=function(){return this.length},Array.prototype.Any=function(t){var e,r;if(t){try{for(var n=Et(this),o=n.next();!o.done;o=n.next()){if(t(o.value))return!0}}catch(i){e={error:i}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(e)throw e.error}}return!1}return 0!==this.length},Array.prototype.Where=function(e){return this.filter(function(t){return e(t)})},Array.prototype.Select=function(t){var e,r,n=[];try{for(var o=Et(this),i=o.next();!i.done;i=o.next()){var u=i.value;n.push(t(u))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(e)throw e.error}}return n},Array.prototype.OrderBy=function(r){return this.sort(function(t,e){return r(t)>r(e)})},Array.prototype.OrderByDescending=function(r){return this.sort(function(t,e){return r(e)-r(t)})},Array.prototype.ForEach=function(t){for(var e=0;e<this.length;e++)t(e,this[e])},Array.prototype.Remove=function(t){var e=this.indexOf(t);return-1!==e?this.splice(e,1):null},Array.prototype.Contains=function(t,e){for(var r=0;r<this.length;r++){if(!e&&this[r].contains(t))return!0;if(e&&this[r]===t)return!0}return!1},Array.prototype.IndexOfPartial=function(t){for(var e=0;e<this.length;e++)if(this[e].contains(t))return e;return-1},Array.prototype.ToObjectArray=function(t){if(t===undefined||null===t)throw new Error("Error: Property name must be provided for conversion.");var e=this;if("string"!=typeof e[0]&&"number"!=typeof e[0]&&"boolean"!=typeof e[0])return this;for(var r=0;r<e.length;r++){var n=e[r];e[r]={},e[r][t]=n}return e},Document.prototype.SelectOne=function(t){return document.querySelector(t)},Document.prototype.SelectAll=function(t){return document.querySelectorAll(t)},Document.prototype.Create=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},NodeList.prototype.ForEach=function(t){for(var e=0;e<this.length;e++)t(e,this[e])},NodeList.prototype.Last=function(){return this[this.length-1]},Element.prototype.SelectOne=function(t){return this.querySelector(t)},Element.prototype.SelectAll=function(t){return this.querySelectorAll(t)},Element.prototype.Attribute=function(t,e){return null!=e?(this.setAttribute(t,e),this):this.getAttribute(t)},Element.prototype.Parent=function(){return this.parentNode},Element.prototype.HasMatches=function(t){return null!=this.matches?this.matches(t):null!=this.msMatchesSelector&&this.msMatchesSelector(t)},Element.prototype.Up=function(t){var e=this;if(null!=e.closest)return e.closest(t);for(;e;){if(e.HasMatches(t))return e;e=e.parentElement}},Element.prototype.First=function(o){return function i(t){for(var e=t,r=e.childNodes,n=0;n<r.length;n++)if(r[n].nodeName.ToLower()===o.ToLower())return r[n];i(e)}(this)},Element.prototype.Append=function(t){return this.insertAdjacentHTML("beforeend",t),this},Element.prototype.Empty=function(){return this.innerHTML="",this},Element.prototype.Drop=function(){return this.parentNode.removeChild(this),this},Element.prototype.RemoveEvent=function(t){var e=this["on"+t]||this[""+t];try{this.removeEventListener(t,e)}catch(r){}try{this.detachEvent("on"+t,e)}catch(r){}return this["on"+t]=null,this[""+t]=null,this},Element.prototype.AddEvent=function(t,e,r){return void 0===r&&(r=!1),r?this["on"+t]=e:this.addEventListener(t,e),this},Element.prototype.Show=function(t){void 0===t&&(t="block");var e=this.attribute("style");return null!=e&&""!==e?this.attribute("style",e.setValueByKey("display",t)):this.attribute("style","display:"+t)},Element.prototype.Hide=function(){var t=this.attribute("style");return null!=t&&""!==t?this.attribute("style",t.setValueByKey("display","none")):this.attribute("style","display:none;")},Element.prototype.Toggle=function(){return this.offsetWidth||this.offsetHeight||this.getClientRects().length?this.hide():this.show()},Element.prototype.AddClass=function(t){return this.className+=" "+t,this.className=this.className.trim(),this},Element.prototype.RemoveClass=function(t){return this.className=this.className.replace(t,"").normalize(),this},Element.prototype.AsString=function(){return this.outerHTML},Element.prototype.IsHidden=function(){return null===this.offsetParent},HTMLElement.prototype.Clean=function(){return this.value=this.value.replace(/\r?\n/g,"\r\n"),this},HTMLElement.prototype.Value=function(r){if(null!=r){if("textarea"===this.nodeName.lower()){this.innerHTML=r;try{this.innerText=r}catch(o){}try{this.value=r}catch(o){}}else if("input"===this.nodeName.lower())switch(this.attribute("type").lower()){case"file":break;case"checkbox":this.checked=!!r;break;case"radio":var t=this.attribute("name");document.SelectAll("input[type='radio'][name='"+t+"']").ForEach(function(t,e){e.Attribute("value")===r?e.checked=!0:e.checked=!1});break;default:this.value=r}else if("select"===this.nodeName.lower())for(var e=0;e<this.options.length;e++)if(this.options[e].value===r){this.selectedIndex=e;break}}else{if("textarea"===this.nodeName.lower()){try{return this.value}catch(o){}return null!=this.innerText&&""!==this.innerText.trim()?this.innerText:null!=this.innerHTML&&""!==this.innerHTML.trim()?this.innerHTML:null}if("input"===this.nodeName.lower())switch(this.attribute("type").lower()){case"checkbox":return this.checked;case"radio":var n=this.attribute("name");return document.SelectOne("input[type='radio'][name='"+n+"']:checked").value;default:return this.value}else if("select"===this.nodeName.lower())return this.options[this.selectedIndex].value}return r};var Ct=function(){function t(){this.Actions=new b}return t.prototype.Register=function(t){return t&&this.Actions.Add(t),this},t.prototype.Find=function(t){return this.Actions.FindAll(t)},t.prototype.FindOne=function(e){return this.Actions.FirstOrDefault(function(t){return t.Name===e})},t}(),xt=function(){function t(t){this.delegate=t}return t.prototype.Invoke=function(t){this.delegate&&this.delegate(t)},t}(),Ft=function(){function t(){this.mediators=new E}return Object.defineProperty(t.prototype,"Mediators",{get:function(){return this.mediators},enumerable:!0,configurable:!0}),t.prototype.RegisterHandler=function(t,e,r){var n=this.mediators.Item(t);return null==n&&(n=new E,this.mediators.Add(t,n)),n.Add(e,r),this},t.prototype.UnregisterHandler=function(t,e){var r=this.mediators.Item(t);return null!=r&&(r.Remove(e),0===r.Count&&this.mediators.Remove(t)),this},t.prototype.SendMessage=function(t,e){var r,n,o=!0,i=this.mediators.Item(t);if(null!=i)try{for(var u=h(i.Values()),s=u.next();!s.done;s=u.next()){var a=s.value;try{a.Invoke(e)}catch(c){o=!1}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u["return"])&&n.call(u)}finally{if(r)throw r.error}}return o},t.decorators=[{type:n.Injectable}],t}(),Ot=new n.InjectionToken("./ICommponentCreator"),Dt=function(){function t(){}return Object.defineProperty(t.prototype,"ViewContainer",{get:function(){return this.mViewContainer},set:function(t){this.mViewContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ComponentFactoryResolver",{get:function(){return this.mComponentFactoryResolver},set:function(t){this.mComponentFactoryResolver=t},enumerable:!0,configurable:!0}),t.prototype.Initialize=function(t,e){this.mViewContainer=t,this.mComponentFactoryResolver=e},t.prototype.CreateComponent=function(t,e){try{var r=this.ComponentFactoryResolver.resolveComponentFactory(t);return e?e.createComponent(r):this.ViewContainer.createComponent(r)}catch(n){return null}},t.decorators=[{type:n.Injectable}],t}(),Pt=[],jt=[Z],Tt=[ct,bt,vt,B,Y,wt,It,At,Ft,Dt,ot,{provide:$,useClass:Ct},{provide:X,useClass:B},{provide:q,useClass:Y},{provide:K,useClass:vt},{provide:_,useClass:ct},{provide:U,useClass:Ft},{provide:Ot,useClass:Dt},{provide:nt,useClass:ot},{provide:M,useClass:V}],Lt=[],Rt=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[jt,Pt],imports:[i.CommonModule,o.HttpModule,o.JsonpModule],providers:Tt,exports:[jt,Lt]}]}],t}();t.XElement=c,t.XDocument=W,t.XObject=a,t.XAttribute=J,t.DelegateCommand=z,t.CommandRepository=B,t.InvokeCommandDirective=Z,t.CommandDescriptor=Q,t.CommandDescriptorRepository=Y,t.CommandDescriptorExtensions=tt,t.AppSettings=rt,t.AppSettingItem=et,t.OptionRepositoryToken=nt,t.OptionRepository=ot,t.ResourceDictionary=it,t.ResourceHolder=ut,t.DefaultLoggerFactory=ct,t.LogLevel=st,t.DebugLogger=pt,t.DebugLoggerProvider=ft,t.Log4JsLogger=ht,t.Log4JsLoggerProvider=mt,t.LoggerFactoryExtensions=gt,t.LoggingExceptionHandler=vt,t.HttpClient=bt,t.ElectronUtil=wt,t.Guid=l,t.StringBuilder=p,t.XmlConverter=f,t.Clipboard=y,t.JsonToken=d,t.WindowSizeWatcherToken=M,t.WindowSizeWatcher=V,t.Collection=v,t.Enumerable=g,t.List=b,t.Grouping=w,t.EnumerableIterator=m,t.NamedDictionary=I,t.Dictionary=E,t.ForEach=C,t.Sort=x,t.FindAll=F,t.FirstOrDefault=O,t.IsEmpty=D,t.Any=P,t.Max=j,t.Min=T,t.OrderBy=L,t.OrderByDescending=R,t.Where=N,t.Select=G,t.ElementAt=k,t.GroupBy=H,t.ObservableCollection=S,t.AngularServiceProvider=It,t.ServiceLocator=At,t.IsDefined=function Gt(t){return null!=t},t.IsObject=St,t.MergeDeep=function kt(n,o){n=JSON.parse(JSON.stringify(n)),o=JSON.parse(JSON.stringify(o));var i=Object.assign({},n);return St(n)&&St(o)&&Object.keys(o).forEach(function(t){var e,r;St(o[t])?t in n?i[t]=kt(n[t],o[t]):Object.assign(i,((e={})[t]=o[t],e)):Object.assign(i,((r={})[t]=o[t],r))}),i},t.Clone=function Ht(t){return t?JSON.parse(JSON.stringify(t)):t},t.CompareProperties=function Mt(t,e){var r,n;if(t===undefined&&e===undefined)return!0;if("[object Array]"===Object.prototype.toString.call(t)){var o=t,i=e;if(o.length!==i.length)return!1;for(var u=0;u<o.length;u++)if(console.log(o[u]),console.log(i[u]),Mt(o[u],!1===i[u]))return!1}else{var s=Object.getOwnPropertyNames(t);try{for(var a=h(s),c=a.next();!c.done;c=a.next()){var l=c.value,p=Object.getOwnPropertyDescriptor(e,l);if(!p)return!1;if("[object Array]"===Object.prototype.toString.call(t)){if(Mt(p.value,!1===t[l]))return!1}else if(p.value!==t[l]&&p.value.toString()!==t[l].toString())return!1}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}}return!0},t.Delay=function(r){return new Promise(function(t,e){setTimeout(function(){t()},r)})},t.ActionRepository=Ct,t.Action=xt,t.MessageMediator=Ft,t.ComponentCreatorToken=Ot,t.ComponentCreator=Dt,t.File=yt,t.Directory=dt,t.MessageMediatorToken=U,t.LoggerFactoryToken=_,t.ExceptionHandlerToken=K,t.CommandRepositoryToken=X,t.CommandDescriptorRepositoryToken=q,t.ActionRepositoryToken=$,t.SystemModule=Rt,t.Éµa=lt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=yafeya-system-common.umd.min.js.map