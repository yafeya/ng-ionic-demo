/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
Array.prototype.Add = function (item) {
    this.push(item);
};
Array.prototype.Empty = function () {
    return this.splice(0, this.length);
};
Array.prototype.IsEmpty = function () {
    if (this.length === 0) {
        return true;
    }
    return false;
};
Array.prototype.ElementAt = function (index) {
    return this[index];
};
Array.prototype.FirstOrDefault = function (predicate) {
    /** @type {?} */
    let result = null;
    if (predicate) {
        for (let item of this) {
            if (predicate(item)) {
                result = item;
                break;
            }
        }
    }
    else {
        result = this[0];
    }
    return result;
};
Array.prototype.Max = function () {
    /** @type {?} */
    let max = this.reduce(function (a, b) {
        return Math.max(a, b);
    });
    return max;
};
Array.prototype.Min = function () {
    /** @type {?} */
    let min = this.reduce(function (a, b) {
        return Math.min(a, b);
    });
    return min;
};
Array.prototype.Count = function () {
    return this.length;
};
Array.prototype.Any = function (predicate) {
    if (predicate) {
        for (let item of this) {
            if (predicate(item))
                return true;
        }
        return false;
    }
    else {
        if (this.length === 0) {
            return false;
        }
        return true;
    }
};
Array.prototype.Where = function (predicate) {
    return this.filter(x => {
        return predicate(x);
    });
};
Array.prototype.Select = function (selector) {
    /** @type {?} */
    let result = [];
    for (let item of this) {
        result.push(selector(item));
    }
    return result;
};
Array.prototype.OrderBy = function (keySelector) {
    return this.sort(function (a, b) {
        return keySelector(a) > keySelector(b);
    });
};
Array.prototype.OrderByDescending = function (keySelector) {
    return this.sort(function (a, b) {
        return keySelector(b) - keySelector(a);
    });
};
Array.prototype.ForEach = function (callback) {
    for (let i = 0; i < this.length; i++) {
        callback(i, this[i]);
    }
};
Array.prototype.Remove = function (item) {
    /** @type {?} */
    let index = this.indexOf(item);
    if (index !== -1) {
        return this.splice(index, 1);
    }
    return null;
};
Array.prototype.Contains = function (partial, strict) {
    for (let i = 0; i < this.length; i++) {
        if (!strict && this[i].contains(partial)) {
            return true;
        }
        if (strict && this[i] === partial) {
            return true;
        }
    }
    return false;
};
Array.prototype.IndexOfPartial = function (partial) {
    for (let i = 0; i < this.length; i++) {
        if (this[i].contains(partial)) {
            return i;
        }
    }
    return -1;
};
/*
 * There are frameworks that auto-generate JSON based on data schemas, but sometimes they
 * return data in inconsistent ways. For example, an array of strings might be returned
 * instead of an array of objects containing strings, etc. because the underlying data at the time
 * only cotains the string value, but when other data is present (in the database, etc.),
 * it will return the object array. Certain convenience methods are necessary to force proper formatting.
 */
Array.prototype.ToObjectArray = function (objName) {
    if (objName === undefined || objName === null) {
        throw new Error('Error: Property name must be provided for conversion.');
    }
    /** @type {?} */
    let items = this;
    if (typeof (items[0]) === 'string' || typeof (items[0]) === 'number' || typeof (items[0]) === 'boolean') {
        for (let i = 0; i < items.length; i++) {
            /** @type {?} */
            let val = items[i];
            items[i] = {};
            items[i][objName] = val;
        }
        return items;
    }
    else {
        return this;
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJyYXlFeHRlbnNpb25zLmpzIiwic291cmNlUm9vdCI6Im5nOi8veWFmZXlhLXN5c3RlbS1jb21tb24vIiwic291cmNlcyI6WyJsaWIvc3lzdGVtL2V4dGVuc2lvbnMvQXJyYXlFeHRlbnNpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUF3QkEsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsVUFBVSxJQUFTO0lBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Q0FDbkIsQ0FBQztBQUNGLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHO0lBQ3BCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBQ3RDLENBQUM7QUFDRixLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRztJQUN0QixJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ25CLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFDRCxPQUFPLEtBQUssQ0FBQztDQUNoQixDQUFDO0FBQ0YsS0FBSyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsVUFBVSxLQUFhO0lBQy9DLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0NBQ3RCLENBQUM7QUFDRixLQUFLLENBQUMsU0FBUyxDQUFDLGNBQWMsR0FBRyxVQUFVLFNBQW9DOztJQUMzRSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFFbEIsSUFBSSxTQUFTLEVBQUU7UUFDWCxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksRUFBRTtZQUNuQixJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDakIsTUFBTSxHQUFHLElBQUksQ0FBQztnQkFDZCxNQUFNO2FBQ1Q7U0FDSjtLQUNKO1NBQU07UUFDSCxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3BCO0lBRUQsT0FBTyxNQUFNLENBQUM7Q0FDakIs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QUFJLEtBQUssR0FBUSxJQUFJLENBQUM7SUFDdEIsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsRUFBRTtRQUNyRyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs7WUFDbkMsSUFBSSxHQUFHLEdBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDZCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDO1NBQzNCO1FBQ0QsT0FBTyxLQUFLLENBQUM7S0FDaEI7U0FBTTtRQUNILE9BQU8sSUFBSSxDQUFDO0tBQ2Y7Q0FDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xyXG4gICAgQWRkOiAoaXRlbTogVCkgPT4gdm9pZDtcclxuICAgIEVtcHR5OiAoKSA9PiBBcnJheTxhbnk+O1xyXG4gICAgSXNFbXB0eTogKCkgPT4gYm9vbGVhbjtcclxuICAgIEFueTogKHByZWRpY2F0ZT86IChzb3VyY2U6IFQpID0+IGJvb2xlYW4pID0+IGJvb2xlYW47XHJcbiAgICBDb3VudDogKCkgPT4gbnVtYmVyO1xyXG4gICAgTWF4OiAoKSA9PiBudW1iZXI7XHJcbiAgICBNaW46ICgpID0+IG51bWJlcjtcclxuICAgIE9yZGVyQnk6IChrZXlTZWxlY3RvcjogKHNvdXJjZTogVCkgPT4gYW55KSA9PiBBcnJheTxUPjtcclxuICAgIE9yZGVyQnlEZXNjZW5kaW5nOiAoa2V5U2VsZWN0b3I6IChzb3VyY2U6IFQpID0+IGFueSkgPT4gQXJyYXk8VD47XHJcbiAgICBXaGVyZTogKHByZWRpY2F0ZTogKHNvdXJjZTogVCkgPT4gYm9vbGVhbikgPT4gQXJyYXk8VD47XHJcbiAgICBTZWxlY3Q6IDxUUmVzdWx0PihzZWxlY3RvcjogKHNvdXJjZTogVCkgPT4gVFJlc3VsdCkgPT4gQXJyYXk8VFJlc3VsdD47XHJcbiAgICBFbGVtZW50QXQ6IChpbmRleDogbnVtYmVyKSA9PiBhbnk7XHJcbiAgICBGaXJzdE9yRGVmYXVsdDogKHByZWRpY2F0ZT86IChzb3VyY2U6IFQpID0+IGJvb2xlYW4pID0+IFQ7XHJcbiAgICBGb3JFYWNoOiAoY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB2b2lkO1xyXG4gICAgUmVtb3ZlOiAoaXRlbTogYW55KSA9PiBhbnk7XHJcbiAgICBDb250YWluczogKHBhcnRpYWw6IHN0cmluZywgc3RyaWN0OiBib29sZWFuKSA9PiBib29sZWFuO1xyXG4gICAgSW5kZXhPZlBhcnRpYWw6IChwYXJ0aWFsOiBzdHJpbmcpID0+IG51bWJlcjtcclxuICAgIFRvT2JqZWN0QXJyYXk6IChvYmpOYW1lOiBzdHJpbmcpID0+IEFycmF5PGFueT47XHJcbn1cclxuXHJcblxyXG5BcnJheS5wcm90b3R5cGUuQWRkID0gZnVuY3Rpb24gKGl0ZW06IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5wdXNoKGl0ZW0pO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuRW1wdHkgPSBmdW5jdGlvbiAoKTogQXJyYXk8YW55PiB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGxpY2UoMCwgdGhpcy5sZW5ndGgpO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuSXNFbXB0eSA9IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuRWxlbWVudEF0ID0gZnVuY3Rpb24gKGluZGV4OiBudW1iZXIpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXNbaW5kZXhdO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuRmlyc3RPckRlZmF1bHQgPSBmdW5jdGlvbiAocHJlZGljYXRlPzogKHNvdXJjZTogYW55KSA9PiBib29sZWFuKTogYW55IHtcclxuICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG5cclxuICAgIGlmIChwcmVkaWNhdGUpIHtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMpIHtcclxuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXN1bHQgPSB0aGlzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5NYXggPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcclxuICAgIGxldCBtYXggPSB0aGlzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heChhLCBiKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG1heDtcclxufTtcclxuQXJyYXkucHJvdG90eXBlLk1pbiA9IGZ1bmN0aW9uICgpOiBudW1iZXIge1xyXG4gICAgbGV0IG1pbiA9IHRoaXMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKGEsIGIpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbWluO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuQ291bnQgPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmxlbmd0aDtcclxufTtcclxuQXJyYXkucHJvdG90eXBlLkFueSA9IGZ1bmN0aW9uIChwcmVkaWNhdGU/OiAoc291cmNlOiBhbnkpID0+IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgIGlmIChwcmVkaWNhdGUpIHtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMpIHtcclxuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShpdGVtKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxufTtcclxuQXJyYXkucHJvdG90eXBlLldoZXJlID0gZnVuY3Rpb24gKHByZWRpY2F0ZTogKHNvdXJjZTogYW55KSA9PiBib29sZWFuKTogQXJyYXk8YW55PiB7XHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXIoeCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHByZWRpY2F0ZSh4KTtcclxuICAgIH0pO1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUuU2VsZWN0ID0gZnVuY3Rpb24gPFRSZXN1bHQ+IChzZWxlY3RvcjogKHNvdXJjZTogYW55KSA9PiBUUmVzdWx0KTogQXJyYXk8VFJlc3VsdD4ge1xyXG4gICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzKSB7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goc2VsZWN0b3IoaXRlbSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuQXJyYXkucHJvdG90eXBlLk9yZGVyQnkgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3I6IChzb3VyY2U6IGFueSkgPT4gYW55KTogQXJyYXk8YW55PiB7XHJcbiAgICByZXR1cm4gdGhpcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGtleVNlbGVjdG9yKGEpID4ga2V5U2VsZWN0b3IoYik7XHJcbiAgICB9KTtcclxufTtcclxuQXJyYXkucHJvdG90eXBlLk9yZGVyQnlEZXNjZW5kaW5nID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yOiAoc291cmNlOiBhbnkpID0+IGFueSk6IEFycmF5PGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBrZXlTZWxlY3RvcihiKSAtIGtleVNlbGVjdG9yKGEpO1xyXG4gICAgfSk7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5Gb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2FsbGJhY2soaSwgdGhpc1tpXSk7XHJcbiAgICB9XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5SZW1vdmUgPSBmdW5jdGlvbiAoaXRlbTogYW55KTogYW55IHtcclxuICAgIGxldCBpbmRleCA9IHRoaXMuaW5kZXhPZihpdGVtKTtcclxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5Db250YWlucyA9IGZ1bmN0aW9uIChwYXJ0aWFsOiBzdHJpbmcsIHN0cmljdDogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFzdHJpY3QgJiYgdGhpc1tpXS5jb250YWlucyhwYXJ0aWFsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0cmljdCAmJiB0aGlzW2ldID09PSBwYXJ0aWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuQXJyYXkucHJvdG90eXBlLkluZGV4T2ZQYXJ0aWFsID0gZnVuY3Rpb24gKHBhcnRpYWw6IHN0cmluZykge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRoaXNbaV0uY29udGFpbnMocGFydGlhbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIC0xO1xyXG59O1xyXG4vKlxyXG4gKiBUaGVyZSBhcmUgZnJhbWV3b3JrcyB0aGF0IGF1dG8tZ2VuZXJhdGUgSlNPTiBiYXNlZCBvbiBkYXRhIHNjaGVtYXMsIGJ1dCBzb21ldGltZXMgdGhleVxyXG4gKiByZXR1cm4gZGF0YSBpbiBpbmNvbnNpc3RlbnQgd2F5cy4gRm9yIGV4YW1wbGUsIGFuIGFycmF5IG9mIHN0cmluZ3MgbWlnaHQgYmUgcmV0dXJuZWRcclxuICogaW5zdGVhZCBvZiBhbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgc3RyaW5ncywgZXRjLiBiZWNhdXNlIHRoZSB1bmRlcmx5aW5nIGRhdGEgYXQgdGhlIHRpbWVcclxuICogb25seSBjb3RhaW5zIHRoZSBzdHJpbmcgdmFsdWUsIGJ1dCB3aGVuIG90aGVyIGRhdGEgaXMgcHJlc2VudCAoaW4gdGhlIGRhdGFiYXNlLCBldGMuKSxcclxuICogaXQgd2lsbCByZXR1cm4gdGhlIG9iamVjdCBhcnJheS4gQ2VydGFpbiBjb252ZW5pZW5jZSBtZXRob2RzIGFyZSBuZWNlc3NhcnkgdG8gZm9yY2UgcHJvcGVyIGZvcm1hdHRpbmcuXHJcbiAqL1xyXG5cclxuQXJyYXkucHJvdG90eXBlLlRvT2JqZWN0QXJyYXkgPSBmdW5jdGlvbiAob2JqTmFtZTogc3RyaW5nKTogQXJyYXk8YW55PiB7XHJcbiAgICBpZiAob2JqTmFtZSA9PT0gdW5kZWZpbmVkIHx8IG9iak5hbWUgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBQcm9wZXJ0eSBuYW1lIG11c3QgYmUgcHJvdmlkZWQgZm9yIGNvbnZlcnNpb24uJyk7XHJcbiAgICB9XHJcbiAgICBsZXQgaXRlbXM6IGFueSA9IHRoaXM7XHJcbiAgICBpZiAodHlwZW9mIChpdGVtc1swXSkgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiAoaXRlbXNbMF0pID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgKGl0ZW1zWzBdKSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdmFsOiBhbnkgPSBpdGVtc1tpXTtcclxuICAgICAgICAgICAgaXRlbXNbaV0gPSB7fTtcclxuICAgICAgICAgICAgaXRlbXNbaV1bb2JqTmFtZV0gPSB2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn07XHJcbiJdfQ==